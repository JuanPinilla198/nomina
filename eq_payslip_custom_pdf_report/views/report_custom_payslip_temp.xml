<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<template id="report_custom_payslip_temp_document">
		<t t-call="web.external_layout">
			<div class="page" style="border:1px solid black;border-radius: 15px;font-size:15px">			
				
				<div style="font-weight:bold;text-align:center;border-radius: 15px 15px 0px 0px;border-bottom:1px solid black;line-height:30px">
					<span name="title">DESPRENDIBLE DE NÓMINA</span>
				</div>
	
				<div>
				  <!--div style="border-top:1px solid black;border-bottom:1px solid black;line-height:30px" align="center">
					<strong>INFORMACIÓN DEL EMPLEADO</strong>
				   </div-->
					<table class="table table-sm ">
							<tr>
								<th>
									<strong>Nombre del empleado: </strong><span t-field="o.employee_id"/>
								</th>
								<th name="identification">
									<strong>No. Doc.: </strong> <span t-field="o.employee_id.identification_id"/>
								</th>
								<th class="text-right">
									<span>Ref.Contrato: </span> <span t-field="o.contract_id.name"/>
								</th>
							</tr>
						</table>
						
						<div style="border-top:1px solid black;border-bottom:1px solid black;line-height:30px" align="center">
						  <strong>INFORMACIÓN DETALLADA</strong>
						</div>
						
						<table class="table table-sm table-hover">
				<thead>
				<tr>
					<th>
						<strong>Ref. Nómina: </strong>
					</th>
					<td>
						<span t-field="o.number"/>
					</td>
					<th name="payment_method">
						
					</th>
					<td name="payment_method_2">
					   
					</td>
				</tr>
				</thead>
				<tbody>
				<tr>
					<td>
						<strong>Fecha desde: </strong>
					</td>
					<td>
						<span t-field="o.date_from"/>
					</td>
					<td>
						<strong>Fecha hasta: </strong>
					</td>
					<td>
						<span t-field="o.date_to"/>
					</td>
				</tr>
				<tr>
					<th>
						<strong>Fecha de Generación: </strong>
					</th>
					<td name="gen_date">
					</td>
					
					<th>
					</th>
					<td>
					</td>
				</tr>
						</tbody>
					</table>
				</div>
				<div>
					<table class="table table-sm">
						<thead class="thead-light">
							<tr>
								<th>NOVEDAD</th>
								<th class="text-center">FECHA INICIAL</th>
								<th class="text-center">FECHA FINAL</th>
								<th>CANTIDAD</th>
							</tr>
						</thead>
						<tbody>
							<tr t-foreach="o.leaves_ids" t-as="line_l">
								<td><span t-field="line_l.holiday_status_id"/></td>
								<td><span t-field="line_l.date_from"/></td>
								<td><span t-field="line_l.date_to"/></td>
								<td class="text-center"><span t-field="line_l.duration_display"/></td>
							</tr>
							<tr t-foreach="o.overtime_ids" t-as="line_o">
								<td><span t-field="line_o.tipo_de_hora_extra"/></td>
								<td><span t-field="line_o.start_date"/></td>
								<td><span t-field="line_o.end_date"/></td>
								<td class="text-center"><span t-field="line_o.num_of_hours"/></td>
							</tr>
						</tbody>
					</table>
				</div>
	
				<div style="margin-top:20px;">
					<span t-set="detail" t-value="o.get_payslip_data()"/>
					<span t-set="total_line_data" t-value="o.get_payslip_data(flag=1)"/>
					<table class="table table-sm table-hover">
					   <thead class="thead-light">
						<tr>
							<th style="width:35%">CONCEPTOS DEVENGADOS</th>
							<th style="width:15%" class="text-right">CANTIDAD</th>
							<th style="width:35%">CONCEPTOS DEDUCCIONES</th>
							<th style="width:15%" class="text-right">CANTIDAD</th>
						</tr>
						 </thead>
						 <tbody>
						<tr t-foreach="detail" t-as="each">
							<td>
								<span t-esc="each['income'].name"/>
							</td>
							<td class="text-right">
								<span t-if="each['income']" t-esc="each['income'].total" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
							</td>
	
							<td style="padding-left:25px;">
								<span t-esc="each['expense'].name"/>
							</td>
							<td class="text-right">
								<span t-if="each['expense']" t-esc="each['expense'].total" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
							</td>
						</tr>
						<tr>
							<th class="text-left">
								Total devengado:
							</th>
							<th class="text-right">
								<span t-esc="total_line_data['income_total']" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
							</th>
							<th class="text-left" style="padding-left:25px;">
								Total deducciones:
							</th>
							<th class="text-right">
								<span t-esc="total_line_data['expense_total']" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
							</th>
						</tr>
						<tr>
							<th/>
							<th/>
							<th class="text-left" style="padding-left:25px;">
								TOTAL A PAGAR:
							</th>
							<th class="text-right">
								<span t-esc="total_line_data['net_total']" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
							</th>
						</tr>
	
						</tbody>
					</table>				
				</div>
	
				<div name="valor_letras">
					<b>VALOR EN LETRAS: </b><span style="text-transform: uppercase" t-esc="o.company_id.currency_id.amount_to_text(total_line_data['net_total'])"/>S MONEDA CORRIENTE
				  </div>
	
				<div style="width:100%;font-weight:bold;margin-top:40px" name="firma">
					<p>Firma autorizada: _________________________________</p>
				</div>				
			</div>
		</t>
	</template>

	<template id="report_custom_payslip_temp">
		<t t-foreach="docs" t-as="o">
			<t t-call="web.html_container">
				<t t-call="eq_payslip_custom_pdf_report.report_custom_payslip_temp_document" />
			</t>
		</t>
	</template>

</odoo>
