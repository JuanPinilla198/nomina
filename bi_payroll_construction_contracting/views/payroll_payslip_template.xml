<?xml version="1.0" encoding="utf-8"?>
<odoo>
        <template id="id_payroll_payslip">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <br/>
                            <br/>
                            <h3 style="text-align : left;font-style:normal;">
                                <span t-field="o.name"/>
                            </h3><br/>
                            <table style="width: 100%;" class="table table-condensed">
                                <tr >
                                    <td><strong >Name: </strong> </td>  
                                    <td><span t-field="o.employee_id"/></td>                      
                                    <td><strong >Designation: </strong> </td>
                                    <td><span t-field="o.employee_id.job_id" /></td>
                                </tr>
                                <tr >
                                    <td><strong >Address: </strong> </td>
                                    <td><span t-field="o.employee_id.address_id"/> </td>
                                    <td><strong ></strong></td>
                                    <td><span/></td> 
                                </tr>
                                <tr >
                                    <td><strong >Email: </strong> </td>
                                    <td><span t-field="o.date_from"/></td>   
                                     <td><strong >Identification Number: </strong> </td>
                                    <td><span t-field="o.employee_id.identification_id"/></td>  
                                </tr>
                                <tr >
                                    <td><strong >Reference: </strong> </td>
                                    <td><span t-field="o.number"/> </td>  
                                     <td><strong >Bank account: </strong> </td>
                                    <td><span t-field="o.employee_id.bank_account_id"/> </td> 
                                </tr>
                                <tr >
                                    <td><strong >Date From: </strong> </td>
                                    <td><span t-field="o.date_from"/></td>   
                                     <td><strong >Date To: </strong> </td>
                                    <td><span t-field="o.date_to"/> </td> 
                                </tr>   
                            </table>
                            <br/>

                            <h3 style="text-align : left;font-style:normal;">
                                Detail by Salary Rule Category
                            </h3><br/>
                            <table  class="table table-condensed" >
                                <tr >
                                    <td><strong >Detail</strong> </td>
                                    <td><strong >Salary Rule Category</strong> </td>
                                    <td><strong>Total</strong></td>
                                </tr>
                                <t t-foreach="o.line_ids" t-as="t">
                                    <tr > 
                                        <td><span t-field="t.name" /></td>
                                        <td><span t-field="t.category_id" /></td>
                                        <td><span t-field="t.total" /></td>
                                    </tr>
                                </t>
                                
                            </table>
                            <br/>
                            <p style="page-break-after:always;"> </p>
                            <br/>
                            <br/>
                            <h3 style="text-align : left;font-style:normal;">
                               Payslip Lines by Contribution Register
                            </h3><br/>
                            <table  class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Name</th>
                                        <th>Quantity/rate</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="get_lines_by_contribution_register.get(o.id, [])" t-as="p">
                                        <td><span t-esc="p.get('code', '')"/></td>
                                        <td><span t-esc="p.get('name', '')"/></td>
                                        <td><span t-esc="p.get('quantity', '')"/></td>
                                        <td><span t-esc="p.get('total', 0)" t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            
                            <br/>
                            <h3 style="text-align : left;font-style:normal;">
                                Timesheet Line Work-Type Rate
                            </h3><br/>
                            <table  class="table table-condensed">
                                <tr >
                                    <td><strong >Work Type</strong> </td>
                                    <td><strong >Total Hours</strong> </td>
                                   </tr>

                                 <t t-foreach="o.work_type_ids" t-as="w">
                                 <tr > 
                                    <td><span t-field="w.work_type_id" /></td>
                                    <td><span t-field="w.hours" /></td>
                                </tr>
                                </t>
                            </table>
                            <br/>

                            <h3 style="text-align : left;font-style:normal;">
                               Timesheet Lines
                            </h3><br/>
                            <table  class="table table-condensed">
                                <tr >
                                    <td><strong >Date</strong> </td>
                                    <td><strong >Description</strong> </td>
                                    <td><strong >Project</strong> </td>
                                    <td><strong >Task</strong> </td>
                                    <td><strong >Work Type</strong> </td>
                                    <td><strong >Total (Hours)</strong> </td>
                                   </tr>

                                 <t t-foreach="o.link_analytic" t-as="a">
                                 <tr > 
                                    <td><span t-field="a.date" /></td>
                                    <td><span t-field="a.name" /></td>
                                    <td><span t-field="a.project_id" /></td>
                                    <td><span t-field="a.task" /></td>
                                    <td><span t-field="a.work_type_id" /></td>
                                    <td><span t-field="a.unit_amount" /></td>
                                </tr>
                                </t>
                            </table>
                        </div>
                    </t>
                </t> 
            </t>
        </template>
</odoo>
